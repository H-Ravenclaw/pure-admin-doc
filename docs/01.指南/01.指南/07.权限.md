---
title: 权限
date: 2021-11-21 10:31:14
permalink: /pages/7a0a31/
article: false
---

## 前言

后台项目区别于其他项目的一大特点，就是权限验证及其安全性。正如我们开发时一般做的第一个页面，就是登录页面，在最开始我们就需要考虑到权限的问题。

思路一：

- 登录：用户输入用户名和密码后，首先通过前端的输入格式和辅助工具（如短信验证码、滑块图）进行验证，再`login`到服务端验证此用户名密码是否正确。服务端会返回一个`token`，拿到`token`之后（这个`token`会被存到`cookie/session/store`中，起到用户登录状态辅助作用），前端会根据`token`再去拉取一个`info`的接口来获取用户的详细信息。需要注意的是，我们应该把`login`跟 `info`分开进行

- 权限：通过`token`拿到`info`获取到`role`，再动态地根据`role`拿到权限相关的信息（如路由表、按钮权限）

思路二：

- 前端控制页面级权限：拿到`role`，映射出前端写好的路由表控制能够看到的页面（如侧边栏选项，也即路由表）
- 后端控制请求权限：用户操作后向服务端发送请求头携带`token`的请求，服务端验证是否有该操作的权限

两种方式都可行，这里推荐第二种方式，理由分析：

- 更好的前后端分离模式：思路一可能导致前端页面的每次增加都要后端配合修改路由与权限，而思路二完美的将页面路由跟操作权限分开
- 更细粒度的权限控制：不同角色可以访问相同页面，但是当前页面操作权限不同，想想是不是思路二更好呢

通过上面的讲述，我们可以知道权限控制有两种，登录权限（是否能成功登录）和角色权限（角色信息如菜单路由、操作按钮权限）。来看看具体是如何实现的吧！

## 登录验证

## 权限验证
