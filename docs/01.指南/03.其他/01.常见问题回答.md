---
title: 常见问题回答
date: 2022-01-18
permalink: /pages/f8dc77/
article: false
---

## 一：`Nuxt3`版本和`JS`版本会开发吗？

- `Nuxt3`版本  
  答：经过我实地检测，`nuxt3`目前还有很多问题待修复，包括一些周边的库大多数都不兼容，感觉要稳定的话还得等大半年及以上

- `JS`版本  
  答：我认为`ts`也该学学了，并不复杂，或许您花一个星期都能掌握，如果谁想开发`js`版本欢迎`pr`

## 二：精简版是干啥的？

- 答：项目开发请使用精简版，精简版是基于[vue-pure-admin](https://github.com/xiaoxian521/vue-pure-admin)提炼出的架子，包含主体功能，会及时同步代码，更适合实际项目开发，打包大小仅 `2MB+`
  ![package](/img/guide/package.png)

## 三：`husky`是什么？可以删除`husky`提交前校验吗？如何彻底删除？

- `husky`是什么？  
  答：[官方文档](https://typicode.github.io/husky/#/)

- 可以删除`husky`提交前校验吗？  
  答：如果您们提交代码不需要严格的提交前校验，这当然可以删除

- 如何彻底删除？  
  ① 删除根目录`.husky`文件夹以及里面所有文件  
  ② 删除根目录`commitlint.config.js`文件夹以及里面所有文件  
  ③ 来到`package.json`下的`devDependencies`，删除`@commitlint/cli`、`@commitlint/config-conventional`、`husky`、`lint-staged`、`pretty-quick`这些依赖  
  ④ 来到`package.json`下的`scripts`，删除`"lint:lint-staged": "lint-staged -c ./.husky/lintstagedrc.js"`、`"lint:pretty": "pretty-quick --staged"`、
  `"prepare": "husky install"`这些命令

## 四：为什么使用 `pnpm`？`pnpm`天生支持`monorepo`，为什么项目不采用这种模式呢？可以不使用 `pnpm` 吗？如何从 `pnpm` 切换到 `yarn`?

- 为什么使用 `pnpm`？  
  ① 节约磁盘空间并提升安装速度  
  当使用 `npm` 或 `Yarn` 时，如果您有 `100` 个项目使用了某个依赖，就会有 `100` 份该依赖的副本保存在硬盘上。 对于 `pnpm` ，依赖项将存储在一个内容可寻址的仓库中，因此：如果您用到了某依赖项的不同版本，那么只会将有差异的文件添加到仓库。例如，如果它有 `100` 个文件，而新版本只改变了其中 `1` 个文件。那么 `pnpm update` 只会向存储中心添加 `1` 个新文件，不会仅因为单一的改变而克隆整个依赖。所有文件都会存储在硬盘上的同一位置。 当多个包（`package`）被安装时，所有文件都会从同一位置创建硬链接，不会占用额外的磁盘空间。 这允许您跨项目地共享同一版本的依赖。最终您节省了大量与项目和依赖成比例的硬盘空间，并且拥有更快的安装速度！  
  ② 创建非扁平化的 `node_modules` 文件夹  
  当使用 `npm` 安装依赖时，所有的依赖都会被提升到模块的根目录。 因此，项目可以访问到未被添加进 当前 项目的依赖。`pnpm` 使用软链的方式将项目的直接依赖添加进模块文件夹的根目录。

- `pnpm`天生支持`monorepo`，为什么项目不采用这种模式呢？  
  答：我们先来简单介绍一下什么是`monorepo`，`monorepos`指单一代码库，在版本控制系统的单个代码库里包含了许多项目的代码，与它对应的是`multirepos`多代码库，每个项目都储存在一个完全独立的、版本控制的代码库中。`monorepo`可能并不适合大多数项目，毕竟大家习惯了多代码库开发，所以平台不采用这种模式。  
  [推荐文章:Monorepo 可能没您想象中那么香](https://baijiahao.baidu.com/s?id=1663844045880515134&wfr=spider&for=pc)

- 可以不使用 `pnpm` 吗？  
  答：可以的

- 如何从 `pnpm` 替换到 `yarn`（`npm`替换方法同下）  
  替换方法：来到根目录 package.json 文件，删除`"pnpm": ">= 6"`和`"preinstall": "npx only-allow pnpm"`，然后将`pnpm`全部换成`yarn`即可  
  ![yarn](/img/guide/yarn.png)

## 五：项目出现报错`Cannot find module '@zougt/some-loader-utils'`

- 为什么会出现`Cannot find module '@zougt/some-loader-utils'`  
  答：项目路径请不要使用中文命名！！！会造成解析乱码！！！请使用全英文路径！！！

## 六：项目出现报错`Access is denied`（windows 常见）

![error](/img/guide/error1.png)

- 解决办法：请遵循平台要求，安装对应的`node`和`pnpm`版本 (`node` 16 版本及以上、`pnpm` 6 版本及以上)，当然很推荐使用[nvm](https://www.runoob.com/w3cnote/nvm-manager-node-versions.html)这款`node`管理工具，可以自由切换您的 node 版本。

## 七：安装依赖时出现报错`Cannot find module 'sass'`

![sass](/img/guide/sass.png)

答：删除项目的`pnpm-lock.yaml`和`node_modules`，重新执行命令`pnpm install`安装依赖即可。

## 八：动态路由刷新出现警告 ⚠️

- 为什么会出现警告？会不会影响使用？  
  答：这个警告是`vue-router`作者故意留下的，咱也不知道为啥，详情看[issues](https://github.com/vuejs/router/issues/521#issuecomment-706680593)。不会影响使用，功能一切表现正常，项目打包部署到生产环境就不会出现警告了。

## 九：项目出现警告`rank only the home page can be 0` ⚠️

![rank](/img/guide/rank.png)

答：路由`meta`里的`rank`字段只有`home`路由才能是`0`，其他均不能为`0`。作为一种规范，`rank`字段最好唯一。`rank`字段代表菜单的排序，而且只能是顶级菜单进行排序，也就是最外层的菜单，为什么这么设计呢。详见[issues/154](https://github.com/xiaoxian521/vue-pure-admin/issues/154#issuecomment-996571156)。

## 十：为什么平台使用`lodash-unified`，而不是使用`lodash-es`呢？

![lodash](/img/guide/lodash.png)

答：其实`lodash-unified`只是对`lodash-es`做了`ESM`(ESModule)格式支持并兼容`CJS`(CommonJS)格式，`vite`又是使用原生`ESM`文件快速启动。这里需要注意的是`lodash-unified`和`lodash-es`需要同时安装。  
用法：`import { sum } from "lodash-unified"`

## 十一：为什么平台使用手动按需引入，而不是使用`unplugin-vue-components`插件自动按需引入呢？

答：我尝试将`unplugin-element-plus`替换成`unplugin-vue-components`，但似乎`unplugin-vue-components`表现不是太好，整体来说有些问题，可以看看[unplugin-vue-components/issues](https://github.com/antfu/unplugin-vue-components/issues)了解一下，而且`unplugin-vue-components`不是为`element-plus`特供的产物，毕竟`vite`等工具还在高速发展，可能会出现一些莫名的问题影响项目，我之前碰到过开发环境没事，打包就凉了（这里是 vite 某个版本的问题），这很坑，所以我感觉手动按需引入更有安全感，毕竟迭代了这么多版本，`unplugin-element-plus`没出过问题。所以整体来说平台都把很多坑都踩过了，毕竟提供很多人使用，平台应该有这个责任在使用最新技术前进行调研，并在综合考虑下保留相对稳定的东西，给平台带来稳定。当然您也可自行替换成`unplugin-vue-components`插件自动按需引入。
