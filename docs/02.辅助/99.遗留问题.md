---
title: 遗留问题
date: 2021-11-17
permalink: /pages/bea9d4/
article: false
---

::: warning 注意
这里是开发和文档编写过程中遇到的问题，暂未设计好放在哪个文档中或不在当前编写进程中，再次做个简单收集，后面陆续穿插进合适的文档。

您也可以在此提 issues，表明你对某些问题的看法和建议!
:::

### 1、缓存问题

项目中有时候可能设计缓存（如 `storage`、`cookie`）相关代码的修改，重新跑项目的时候，记得做清除缓存操作，不然可能会出现渲染 Bug。

你可以选择打开浏览器，清除浏览器缓存

### 2、代码规范插件

禁用 Vetur 并安装如下插件：

- ESLint
- Prettier - Code formatter
- Stylelint
- vs code-icons
- TypeScript Vue Plugin (Volar)
- Vue Language Features (Volar)

### 3、JSX 的使用

插件安装 ：

```typescript
@vitejs/plugin-vue-jsx
```

vite.config.ts 配置：

```typescript
import vueJsx from "@vitejs/plugin-vue-jsx";

plugins: [
      vueJsx(),
      ......
]
```

[参考 vue.js 官方文档](https://v3.cn.vuejs.org/guide/render-function.html)，vue3.2 中实际开发的简化抽离版：

```typescript
const titleComponent = defineComponent({
  render() {
    return h(
      "h" + this.level, // 标签名
      {
        name: "huohuo", // prop 或 attribute
        appear: true,
      },
      {
        default: () => [this.$slots.default()], // 包含其子节点的数组
      }
    );
  },
  props: {
    level: {
      type: Number,
      required: true,
    },
  },
});
```

项目中实际应用例子：

```typescript
// src/layout/components/appMain.vue
const transitionMain = defineComponent({
  render() {
    return h(
      Transition,
      {
        name:
          transitions.value(this.route) &&
          this.route.meta.transition.enterTransition
            ? "pure-classes-transition"
            : (transitions.value(this.route) &&
                this.route.meta.transition.name) ||
              "fade-transform",
        enterActiveClass:
          transitions.value(this.route) &&
          `animate__animated ${this.route.meta.transition.enterTransition}`,
        leaveActiveClass:
          transitions.value(this.route) &&
          `animate__animated ${this.route.meta.transition.leaveTransition}`,
        mode: "out-in",
        appear: true,
      },
      {
        default: () => [this.$slots.default()],
      }
    );
  },
  props: {
    route: {
      type: undefined,
      required: true,
    },
  },
});
```

```typescript
// src/layout/index.vue
const layoutHeader = defineComponent({
  render() {
    return h(
      "div",
      {
        class: { "fixed-header": set.fixedHeader },
        style: [
          set.hideTabs && layout.value.includes("horizontal")
            ? "box-shadow: 0 1px 4px rgb(0 21 41 / 8%);"
            : "",
        ],
      },
      {
        default: () => [
          !hiddenSideBar.value && layout.value.includes("vertical")
            ? h(navbar)
            : h("div"),
          !hiddenSideBar.value && layout.value.includes("horizontal")
            ? h(Horizontal)
            : h("div"),
          h(
            tag,
            {},
            {
              default: () => [
                h(
                  "span",
                  { onClick: onFullScreen },
                  {
                    default: () => [
                      !hiddenSideBar.value ? h(fullScreen) : h(exitScreen),
                    ],
                  }
                ),
              ],
            }
          ),
        ],
      }
    );
  },
});
```
